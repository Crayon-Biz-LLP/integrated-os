name: Pulse Cron
on:
  schedule:
    # Runs every hour at minute 30 UTC (Which is exactly the top of the hour in IST)
    - cron: '30 * * * *'
  workflow_dispatch:  # Manual test button

jobs:
  pulse:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
    - uses: actions/checkout@v4
    
    - name: Trigger Vercel Pulse
      run: |
        RESPONSE=$(curl -s -w "HTTP: %{http_code}" -X POST \
          https://chief-three.vercel.app/api/pulse \
          -H "x-pulse-secret: ${{ secrets.PULSE_SECRET }}")
        echo $RESPONSE
      env:
        CURL_CA_BUNDLE: ""